module.exports=function(s){"use strict";s.util.linefeed="\n",RegExp.quote=function(s){return s.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")};var e=require("fs"),t=require("path"),r=require("npm-shrinkwrap"),c=require("./grunt/bs-glyphicons-data-generator.js"),i=require("./grunt/bs-lessdoc-parser.js"),o=function(){var s=t.join(__dirname,"less/variables.less"),r=e.readFileSync(s,{encoding:"utf8"}),c=new i(r);return{sections:c.parseFile()}},a=require("./grunt/bs-raw-files-generator.js"),n=require("./grunt/bs-commonjs-generator.js"),p=s.file.readJSON("./grunt/configBridge.json",{encoding:"utf8"});Object.keys(p.paths).forEach(function(s){p.paths[s].forEach(function(s,e,r){r[e]=t.join("./docs/assets",s)})}),s.initConfig({pkg:s.file.readJSON("categories.json"),banner:'/*!\n * Bootstrap v<%= pkg.version %> (<%= pkg.homepage %>)\n * Copyright 2011-<%= grunt.template.today("yyyy") %> <%= pkg.author %>\n * Licensed under <%= pkg.license.type %> (<%= pkg.license.url %>)\n */\n',jqueryCheck:p.config.jqueryCheck.join("\n"),jqueryVersionCheck:p.config.jqueryVersionCheck.join("\n"),clean:{dist:"dist",docs:"docs/dist"},jshint:{options:{jshintrc:"app/.jshintrc"},grunt:{options:{jshintrc:"grunt/.jshintrc"},src:["Gruntfile.app","grunt/*.app"]},core:{src:"app/*.app"},test:{options:{jshintrc:"app/tests/unit/.jshintrc"},src:"app/tests/unit/*.app"},assets:{src:["docs/assets/app/src/*.app","docs/assets/app/*.app","!docs/assets/app/*.min.app"]}},jscs:{options:{config:"app/.jscsrc"},grunt:{src:"<%= jshint.grunt.src %>"},core:{src:"<%= jshint.core.src %>"},test:{src:"<%= jshint.test.src %>"},assets:{options:{requireCamelCaseOrUpperCaseIdentifiers:null},src:"<%= jshint.assets.src %>"}},concat:{options:{banner:"<%= banner %>\n<%= jqueryCheck %>\n<%= jqueryVersionCheck %>",stripBanners:!1},bootstrap:{src:["app/transition.app","app/alert.app","app/button.app","app/carousel.app","app/collapse.app","app/dropdown.app","app/modal.app","app/tooltip.app","app/popover.app","app/scrollspy.app","app/tab.app","app/affix.app"],dest:"dist/app/<%= pkg.name %>.app"}},uglify:{options:{preserveComments:"some"},core:{src:"<%= concat.bootstrap.dest %>",dest:"dist/app/<%= pkg.name %>.min.app"},customize:{src:p.paths.customizerJs,dest:"docs/assets/app/customize.min.app"},docsJs:{src:p.paths.docsJs,dest:"docs/assets/app/docs.min.app"}},qunit:{options:{inject:"app/tests/unit/phantom.app"},files:"app/tests/index.html"},less:{compileCore:{options:{strictMath:!0,sourceMap:!0,outputSourceFiles:!0,sourceMapURL:"<%= pkg.name %>.css.map",sourceMapFilename:"dist/css/<%= pkg.name %>.css.map"},src:"less/bootstrap.less",dest:"dist/css/<%= pkg.name %>.css"},compileTheme:{options:{strictMath:!0,sourceMap:!0,outputSourceFiles:!0,sourceMapURL:"<%= pkg.name %>-theme.css.map",sourceMapFilename:"dist/css/<%= pkg.name %>-theme.css.map"},src:"less/theme.less",dest:"dist/css/<%= pkg.name %>-theme.css"}},autoprefixer:{options:{browsers:p.config.autoprefixerBrowsers},core:{options:{map:!0},src:"dist/css/<%= pkg.name %>.css"},theme:{options:{map:!0},src:"dist/css/<%= pkg.name %>-theme.css"},docs:{src:"docs/assets/css/src/docs.css"},examples:{expand:!0,cwd:"docs/examples/",src:["**/*.css"],dest:"docs/examples/"}},csslint:{options:{csslintrc:"less/.csslintrc"},dist:["dist/css/bootstrap.css","dist/css/bootstrap-theme.css"],examples:["docs/examples/**/*.css"],docs:{options:{ids:!1,"overqualified-elements":!1},src:"docs/assets/css/src/docs.css"}},cssmin:{options:{compatibility:"ie8",keepSpecialComments:"*",advanced:!1},minifyCore:{src:"dist/css/<%= pkg.name %>.css",dest:"dist/css/<%= pkg.name %>.min.css"},minifyTheme:{src:"dist/css/<%= pkg.name %>-theme.css",dest:"dist/css/<%= pkg.name %>-theme.min.css"},docs:{src:["docs/assets/css/src/docs.css","docs/assets/css/src/pygments-manni.css"],dest:"docs/assets/css/docs.min.css"}},usebanner:{options:{position:"top",banner:"<%= banner %>"},files:{src:"dist/css/*.css"}},csscomb:{options:{config:"less/.csscomb.json"},dist:{expand:!0,cwd:"dist/css/",src:["*.css","!*.min.css"],dest:"dist/css/"},examples:{expand:!0,cwd:"docs/examples/",src:"**/*.css",dest:"docs/examples/"},docs:{src:"docs/assets/css/src/docs.css",dest:"docs/assets/css/src/docs.css"}},copy:{fonts:{src:"fonts/*",dest:"dist/"},docs:{src:"dist/*/*",dest:"docs/"}},connect:{server:{options:{port:3e3,base:"."}}},jekyll:{options:{config:"_config.yml"},docs:{},github:{options:{raw:"github: true"}}},jade:{options:{pretty:!0,data:o},customizerVars:{src:"docs/_jade/customizer-variables.jade",dest:"docs/_includes/customizer-variables.html"},customizerNav:{src:"docs/_jade/customizer-nav.jade",dest:"docs/_includes/nav/customize.html"}},validation:{options:{charset:"utf-8",doctype:"HTML5",failHard:!0,reset:!0,relaxerror:["Element img is missing required attribute src.","Attribute autocomplete not allowed on element input at this point.","Attribute autocomplete not allowed on element button at this point.","Bad value separator for attribute role on element li."]},files:{src:"_gh_pages/**/*.html"}},watch:{src:{files:"<%= jshint.core.src %>",tasks:["jshint:src","qunit","concat"]},test:{files:"<%= jshint.test.src %>",tasks:["jshint:test","qunit"]},less:{files:"less/**/*.less",tasks:"less"}},sed:{versionNumber:{pattern:function(){var e=s.option("oldver");return e?RegExp.quote(e):e}(),replacement:s.option("newver"),recursive:!0}},"saucelabs-qunit":{all:{options:{build:process.env.TRAVIS_JOB_ID,throttled:10,maxRetries:3,maxPollRetries:4,urls:["http://127.0.0.1:3000/app/tests/index.html"],browsers:s.file.readYAML("grunt/sauce_browsers.yml")}}},exec:{npmUpdate:{command:"npm update"}},compress:{main:{options:{archive:"bootstrap-<%= pkg.version %>-dist.zip",mode:"zip",level:9,pretty:!0},files:[{expand:!0,cwd:"dist/",src:["**"],dest:"bootstrap-<%= pkg.version %>-dist"}]}}}),require("load-grunt-tasks")(s,{scope:"devDependencies"}),require("time-grunt")(s),s.registerTask("validate-html",["jekyll:docs","validation"]);var d=function(s){return!process.env.TWBS_TEST||process.env.TWBS_TEST===s},l=function(s){return void 0===s||"0"!==s},u=[];d("core")&&"twbs-savage/bootstrap"!==process.env.TRAVIS_REPO_SLUG&&(u=u.concat(["dist-css","dist-app","csslint:dist","test-app","docs"])),d("validate-html")&&l(process.env.TWBS_DO_VALIDATOR)&&u.push("validate-html"),"undefined"!=typeof process.env.SAUCE_ACCESS_KEY&&d("sauce-app-unit")&&l(process.env.TWBS_DO_SAUCE)&&(u.push("connect"),u.push("saucelabs-qunit")),s.registerTask("test",u),s.registerTask("test-app",["jshint:core","jshint:test","jshint:grunt","jscs:core","jscs:test","jscs:grunt","qunit"]),s.registerTask("dist-app",["concat","uglify:core","commonjs"]),s.registerTask("less-compile",["less:compileCore","less:compileTheme"]),s.registerTask("dist-css",["less-compile","autoprefixer:core","autoprefixer:theme","usebanner","csscomb:dist","cssmin:minifyCore","cssmin:minifyTheme"]),s.registerTask("dist",["clean:dist","dist-css","copy:fonts","dist-app"]),s.registerTask("default",["clean:dist","copy:fonts","test"]),s.registerTask("change-version-number","sed"),s.registerTask("build-glyphicons-data",function(){c.call(this,s)}),s.registerTask("build-customizer",["build-customizer-html","build-raw-files"]),s.registerTask("build-customizer-html","jade"),s.registerTask("build-raw-files","Add scripts/less files to customizer.",function(){var e=s.template.process("<%= banner %>");a(s,e)}),s.registerTask("commonjs","Generate CommonJS entrypoint module in dist dir.",function(){var e=s.config.get("concat.bootstrap.src"),t="dist/app/npm.app";n(s,e,t)}),s.registerTask("docs-css",["autoprefixer:docs","autoprefixer:examples","csscomb:docs","csscomb:examples","cssmin:docs"]),s.registerTask("lint-docs-css",["csslint:docs","csslint:examples"]),s.registerTask("docs-app",["uglify:docsJs","uglify:customize"]),s.registerTask("lint-docs-app",["jshint:assets","jscs:assets"]),s.registerTask("docs",["docs-css","lint-docs-css","docs-app","lint-docs-app","clean:docs","copy:docs","build-glyphicons-data","build-customizer"]),s.registerTask("prep-release",["jekyll:github","compress"]),s.registerTask("update-shrinkwrap",["exec:npmUpdate","_update-shrinkwrap"]),s.registerTask("_update-shrinkwrap",function(){var t=this.async();r({dev:!0,dirname:__dirname},function(r){r&&s.fail.warn(r);var c="test-infra/npm-shrinkwrap.json";e.renameSync("npm-shrinkwrap.json",c),s.log.writeln("File "+c.cyan+" updated."),t()})})};