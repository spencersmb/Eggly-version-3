angular.module("eggly.models.bookmarks",[]).service("BookmarksModel",function(o,e){function n(o){return o.data}function r(o){return i=n(o)}function t(o){return _.find(i,function(e){return e.id===parseInt(o)})}var i,a=this,u={FETCH:"app/data/bookmarks.json"};a.getBookmarkById=function(o){var n=e.defer();return i?n.resolve(t(o)):a.getBookmarks().then(function(){n.resolve(t(o))}),n.promise},a.getBookmarks=function(){var n=e.defer();return i?n.resolve(i):o.get(u.FETCH).then(function(o){n.resolve(r(o))}),n.promise},a.createBookmark=function(o){console.log("bookmark "+o),console.log("bookmarks "+i.length),o.id=i.length,i.push(o)},a.updateBookmark=function(o){var e=_.findIndex(i,function(e){return e.id==o.id});i[e]=o},a.deleteBookmark=function(o){var e=_.filter(i,function(e){return e.id===o.id});e&&i.splice(o.id,1)}});